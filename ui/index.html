<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style text="text/css">
  body
   { background-color: grey;}
   
   
   .dropbtn {
    background-color:black;
    color: white;
    padding: 14px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}
.dropdown {
    position: relative;
    display: inline-block;
}
.dropdown-content {
    display: none;
    position: absolute;
    background-color: black;
    min-width: 180px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
}
.dropdown-content a {
    color: white;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}
.dropdown-content a:hover {background-color: grey}
.dropdown:hover .dropdown-content {
    display: block;
}
.dropdown:hover .dropbtn {
    background-color: black;}
    
    h1 {
    font-family: "Times New Roman", Times, serif;
}
    h2 {
    font-family: "Times New Roman", Times, serif;
}
   
   
   </style></head>
   <body>
       <nav class="navbar navbar-inverse">
  <div class="container-fluid">
    
    <ul class="nav navbar-nav">
      <li class="active"><a href="#">Home</a></li>
      
     
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="https://www.facebook.com/arcynosure">
          <img src="http://www.32barblues.com/images/facebook_icon.png" height="30px" width="30px" margin="0px">
          </a>
         
      </li>
      
      <li><a href="https://in.linkedin.com/in/anantha-padmanabham-41b44612b">
          <img src="http://tigerstrypes.com/wp-content/uploads/2014/08/linkedin-vector-080311.png" height="30px" width="30px" margin="0px">
      </a></li>
      <li><a href="https://github.com/arcynosure">
          <img src="https://major.io/wp-content/uploads/2014/08/github.png" height="30px" width="30px" margin="0px">
          </a>
         
      </li>
      
    </ul>
  </div>
</nav>
       
  
  
  
  
  <div class="container-fluid text-center">
  <div class="row content">
      
    <div class="col-sm-3 sidenav">
     <img src="https://fbcdn-photos-d-a.akamaihd.net/hphotos-ak-xpt1/v/t1.0-0/p206x206/14449851_1263440997021444_4938962017289148030_n.jpg?oh=4c4d9818e3efde15ab0775ee1132b3ce&oe=58D47750&__gda__=1485595740_23f88f95cb23be96b541a6b176abf167" height="250px" width="250px" >
     <br>
      

      <p>
      
      <centre>
          
          <h2>Ananthapadmanabhan</h2>
          <h4>
              3rd year <br/>
              Electrical And Electronics Engineering<br/>
              Thangal Kunju Musaliar College Of Engineering<br/>
              Kollam,Kerala
              
              
              
          </h4>
          
          
          
      </centre>
      
      
      </p>
     


     
      </div>
      <div class="col-sm-7 sidenav">
       
    
    
       
      <h1>Welcome</h1>
      <p>    
          
          The evolution of the human race showed an abrupt rise after the descriptive texts came into existence.
          The deployment of the ancient passed down values from sages to their students into a written format
          marked the advent of a new era.The developement of scriptures gave education a new phase.Beginning from
          the earliest written rig veda in Bhojpatras and pamphlets to the modern day e-booksand blogs which one   
          can download from the internet, the method of preserving values and information in a written format has 
          come past a long way.Indeed there is nodoubt the modern day blogs are the most effective and fast way
          to convey ideas and information. 
          
          
          
          
          
      </p>
      <hr>
      
       
    </div>
    <div class="col-sm-2 sidenav">
      <div class="dropdown">
  <button class="dropbtn">Contact</button>
  <div class="dropdown-content">
   <ul class="dropdown">
    
    <a href="#"><span class="glyphicon glyphicon-envelope"> arcynosure@gmail.com</span></a>
    <a href="#"><span class="glyphicon glyphicon-phone">  <br> 9745199477</span></a>
   
 </ul>
  </div>
  
  </div>
  <br><br><br>
      

    <div id="login_area">
         helo
               
            </div>
    
   

     
    
   
  
 
  
</div>

      
</div>


<script>
function loadLoginForm () {
    var loginHtml = ` 
    
<h1>Login</h1>
<br>
<form>
  <div class="form-group">
    <label for="username">Username:</label>
    <input type="username" class="form-control" id="username"  placeholder="username">
  </div>
  <div class="form-group">
    <label for="pwd">Password:</label>
    <input type="password" class="form-control" id="password" placeholder="password">
  </div>
  
  <button type="submit" id="submit_btn" class="btn btn-success">Submit</button>
  <button type="register " id="register_btn" class="btn btn-success">Signup</button>
</form>
<br><br>
 
        
        `;
 document.getElementById('login_area').innerHTML = loginHtml;
    
    // Submit username/password to login
    var submit = document.getElementById('login_btn');
    submit.onclick = function () {
        // Create a request object
        var request = new XMLHttpRequest();
        
        // Capture the response and store it in a variable
        request.onreadystatechange = function () {
          if (request.readyState === XMLHttpRequest.DONE) {
              // Take some action
              if (request.status === 200) {
                  submit.value = 'Sucess!';
              } else if (request.status === 403) {
                  submit.value = 'Invalid credentials. Try again?';
              } else if (request.status === 500) {
                  alert('Something went wrong on the server');
                  submit.value = 'Login';
              } else {
                  alert('Something went wrong on the server');
                  submit.value = 'Login';
              }
              loadLogin();
          }  
          // Not done yet
        };
        
        // Make the request
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        console.log(username);
        console.log(password);
        request.open('POST', '/login', true);
        request.setRequestHeader('Content-Type', 'application/json');
        request.send(JSON.stringify({username: username, password: password}));  
        submit.value = 'Logging in...';
        
    };
    
    var register = document.getElementById('register_btn');
    register.onclick = function () {
        // Create a request object
        var request = new XMLHttpRequest();
        
        // Capture the response and store it in a variable
        request.onreadystatechange = function () {
          if (request.readyState === XMLHttpRequest.DONE) {
              // Take some action
              if (request.status === 200) {
                  alert('User created successfully');
                  register.value = 'Registered!';
              } else {
                  alert('Could not register the user');
                  register.value = 'Register';
              }
          }
        };
        
        // Make the request
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        console.log(username);
        console.log(password);
        request.open('POST', '/create-user', true);
        request.setRequestHeader('Content-Type', 'application/json');
        request.send(JSON.stringify({username: username, password: password}));  
        register.value = 'Registering...';
    
    };
}
function loadLoggedInUser (username) {
    var loginArea = document.getElementById('login_area');
    loginArea.innerHTML = `
        <h3> Hi <i>${username}</i></h3>
        <a href="/logout">Logout</a>
    `;
}
function loadLogin () {
    // Check if the user is already logged in
    var request = new XMLHttpRequest();
    request.onreadystatechange = function () {
        if (request.readyState === XMLHttpRequest.DONE) {
            if (request.status === 200) {
                loadLoggedInUser(this.responseText);
            } else {
                loadLoginForm();
            }
        }
    };
    
    request.open('GET', '/check-login', true);
    request.send(null);
}
function loadArticles () {
        // Check if the user is already logged in
    var request = new XMLHttpRequest();
    request.onreadystatechange = function () {
        if (request.readyState === XMLHttpRequest.DONE) {
            var articles = document.getElementById('articles');
            if (request.status === 200) {
                var content = '<ul>';
                var articleData = JSON.parse(this.responseText);
                for (var i=0; i< articleData.length; i++) {
                    content += `<li>
                    <a href="/articles/${articleData[i].title}">${articleData[i].heading}</a>
                    (${articleData[i].date.split('T')[0]})</li>`;
                }
                content += "</ul>"
                articles.innerHTML = content;
            } else {
                articles.innerHTML('Oops! Could not load all articles!')
            }
        }
    };
    
    request.open('GET', '/get-articles', true);
    request.send(null);
}

loadLogin();
loadArticles();
</script>
</body>
</html>